{% load static %}

{% verbatim %}
<div>
  <p>
    <strong>{{ list.name }}</strong>
    (<a class="link-text" href="{{ ml.listMembersUrl(list) }}"><ng-pluralize count="list.members_count" when="{'0': 'No members', 'one': '1 member', 'other': '{} members'}"></ng-pluralize></a>)
  </p>
</div>
<div class="float-left col-40" style="padding-left: 0;">
  <p ng-class="list.access_level == 'readonly' ? 'caption-disabled' : ''">
    <a id="email-section-{{ list.section_id }}" target="_top" href="mailto:{{ list.address }}" ng-disabled="list.access_level == 'readonly'">
       <i class="fa fa-envelope"></i> {{ list.address }}
    </a>
  </p>
</div>
{% endverbatim %}
<div class="float-left col-60">
  <div class="float-left col-60">
    <p>
      <strong ng-bind="ml.accessLevelDisplayNameMap[list.access_level]['{{ scope }}']"></strong> - <span ng-bind="ml.accessLevelDescriptionMap[list.access_level]['{{ scope }}']"></span>
    </p>
  </div>
  <div class="float-left col-40">
{% verbatim %}
    <button class="btn btn-submit" data-toggle="modal" data-target="#permissions-modal-{{ list.section_id }}" ng-click="ml.updatedAccessLevel = list.access_level"><i class="fa fa-gear"></i> Change</button>
{% endverbatim %}
    <img src="{% static 'images/ajax-loader-small.gif' %}" ng-show="list.isUpdating" class="ng-hide">
    <span class="text-success feedback ng-hide" ng-show="list.updated">✓</span>
    <span class="text-danger feedback ng-hide" ng-show="list.update_failed">✗</span>
  </div>
</div>
{% verbatim %}
  <div id="permissions-modal-{{ list.section_id }}" class="modal fade">
{% endverbatim %}
    <div class="modal-dialog">
      <div class="modal-content">
        <form>
          <div class="modal-header">
            <button type="button"
                    class="close"
                    data-dismiss="modal"
                    aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
            <h4 class="modal-title">
{% verbatim %}
              <label for="permissions-input-{{ list.section_id }}" class="ic-Label">
                Change Permissions
              </label>
            </h4>
          </div>
          <div class="modal-body">
            <div id="permissions-input-{{ list.section_id }}">
              <div class="indented-radio-block"
                   ng-repeat="access_level in ml.accessLevels">
                <input type="radio"
                       class="indented-radio-block-input"
                       id="permissions-radio-{{ list.section_id }}-{{ access_level.id }}"
                       ng-model="ml.updatedAccessLevel"
                       value="{{ access_level.id }}">
                <label class="indented-radio-block-label"
                       for="permissions-radio-{{ list.section_id }}-{{ access_level.id }}">
{% endverbatim %}
                  <span ng-bind="access_level.name['{{ scope }}']"></span>
                </label>
                  <span ng-bind="access_level.description['{{ scope }}']"></span>
                <br/>
              </div>
            </div>
          </div>
          <div class="modal-footer">
            <div class="ic-Form-actions">
              <a href="#" data-dismiss="modal">Cancel</a>
              <button type="button"
                      class="btn btn-primary btn-submit"
                      ng-click="ml.updateAccessLevel(list)">
                Update Permissions
              </button>
            </div>
          </div>
        </form>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div>
